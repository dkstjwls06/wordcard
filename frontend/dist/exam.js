(self["webpackChunksocket_test_front"] = self["webpackChunksocket_test_front"] || []).push([["exam"],{

/***/ "./src/exam.ts":
/*!*********************!*\
  !*** ./src/exam.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./id */ "./src/id.ts");

let elms = null;
// import * as socketio from 'socket.io-client';
// let tempobj = {word,mean,synonym} as wordinfo
const signout = document.querySelector('#signout');
signout.addEventListener('click', e => {
    window.parent.location.href = '/logout';
});
//signout
const settimeout = (time) => new Promise((res, rej) => {
    setTimeout(res, time);
}); // time초 기다리기
const waittillpress = (target, type) => new Promise((res, rej) => {
    target.addEventListener(type, res, { once: true });
});
const nick = document.querySelector('.nick');
const init = async () => {
    const data = await (0,_id__WEBPACK_IMPORTED_MODULE_0__.fetchData)();
    for (let i = 0; i < 2; i++) {
        nick.innerHTML = data;
    }
    return;
};
init();
//nickname
const bless = document.querySelector('#blessing');
const fetchbless = async () => {
    console.log('hi');
    const res = await fetch('/bless');
    const data = await res.json();
    bless.innerHTML = data.word;
};
fetchbless();
const mypage = document.querySelector('#mypage');
mypage.addEventListener('click', e => {
    location.href = '/';
});
//underword
const support = document.querySelector('#support');
support.addEventListener('click', e => {
    location.href = '/support';
});
const share = document.querySelector('#share');
share.addEventListener('click', e => {
    location.href = '/share';
});
// if(socketio.connect().disconnected){
//     const del = async () => {
//         const res = await fetch('/exam/userOffline?')
//     }
//     del()
// }
const title = [...document.querySelectorAll('.title')];
const waiting = document.querySelector('.waiting');
const whileexam = document.querySelector('.whileexam');
//기본 틀
const ready = [...document.querySelectorAll('.ready')];
//시작 시
const questiondiv = document.querySelector('.question');
const given = document.querySelector('.given');
//문제
const choicelist = document.querySelector('.list');
// 객관식
const answer = document.querySelector('.answer');
//주관식
const status = [...document.querySelectorAll('.status')];
// 정 / 오답
const next = document.querySelector('.next');
//다음 문제로
const time = document.querySelector('.timeleft');
//남은 시간
let params = (new URL(`${location}`)).searchParams;
let data = {
    type: params.get('type'),
    title: params.get('title').replace(/\!\@\!\@\$\(/g, ' ')
};
whileexam.classList.add('none');
const settitle = () => {
    title[0].innerHTML = `Range : ${data.title}`;
    title[1].innerHTML = `Type : ${data.type}`;
};
settitle();
//제목 표출
const arr = ['WtoM', 'WtoS', 'MtoW', 'MtoS', 'StoW', 'StoM'];
let examdata = null;
const doingexam = async () => {
    const res = await fetch(`/exam/getExamData?type=${params.get('type')}&madeby=${params.get('madeby')}&title=${params.get('title')}&share=${params.get('share')}&examinee=${params.get('examinee')}`);
    const result = await res.json();
    console.log(result);
    examdata = result.examdata;
    console.log(examdata); // 결과를 첨삭 형식으로 여기다 넣기
    waiting.classList.remove('none');
    ready[0].classList.remove('none');
    await settimeout(3000);
    ready[0].classList.add('none');
    ready[1].classList.remove('none');
    await settimeout(500);
    ready[1].classList.add('none');
    waiting.classList.add('none');
    whileexam.classList.remove('none');
    let questionlist = examdata.question;
    let nu = 1;
    let replace = {
        W: 'word',
        M: 'mean',
        S: 'synonym'
    };
    if (examdata.type === 'objective') {
        choicelist.classList.remove('none');
        for (let i of arr) { // 유형 6개
            const key1 = i[0];
            const key2 = i[3];
            let from = replace[key1];
            let to = replace[key2];
            for (let j = 0; j < examdata.question[i].length; j++) {
                let trigger = false;
                console.log('eifj');
                let question = questionlist[i][j]; // 지금 내야 할 문제 가져오기
                console.log(question);
                questiondiv.innerHTML = `Q${nu}. Which choice is the best fit?`;
                nu++;
                given.innerHTML = `Given word : ${question.question}`;
                for (let k = 0; k < 5; k++) {
                    let li = document.createElement('li');
                    li.innerHTML = question.choice[k];
                    choicelist.appendChild(li);
                }
                const choices = document.querySelector('ol > li');
                time.classList.remove('none');
                time.innerHTML = 'Time Left : 5 sec';
                let timeleft = 5;
                const fun = setInterval(() => {
                    console.log('counting');
                    timeleft--;
                    time.innerHTML = `Time Left : ${timeleft} sec`;
                    if (timeleft === 0)
                        clearInterval(fun);
                }, 1000);
                let answer = question.answer;
                choicelist.addEventListener('click', e => {
                    let target = e.target;
                    console.log(target.innerHTML);
                    if (target.innerHTML === question.choice[answer]) { // 맞았을 때
                        examdata.question[i][j].result = 'correct';
                        examdata.question[i][j].chosen = target.innerHTML;
                        status[0].classList.remove('none');
                        console.log('맞음');
                        clearInterval(fun);
                    }
                    else { // 틀렸을 때
                        if (timeleft === 0) {
                            return;
                        }
                        examdata.question[i][j].result = 'wrong';
                        examdata.question[i][j].chosen = target.innerHTML;
                        status[1].classList.remove('none');
                        status[1].innerHTML = `Wrong Choice :/ <br> Answer : ${examdata.question[i][j].choice[answer]}`;
                        console.log('틀림');
                        clearInterval(fun);
                    }
                    next.classList.remove('none');
                    trigger = true;
                });
                await settimeout(5000); //시간제한 5초.
                console.log(trigger);
                if (!trigger) {
                    examdata.question[i][j].result = 'wrong';
                    examdata.question[i][j].chosen = null; // 선택 안함 (시간 초과)
                    status[1].classList.remove('none');
                    status[1].innerHTML = `You ran all of time! :| <br> Answer : ${examdata.question[i][j].choice[answer]}`;
                }
                next.classList.remove('none');
                await waittillpress(next, 'click');
                while (choicelist.hasChildNodes()) {
                    choicelist.removeChild(choicelist.firstChild);
                }
                next.classList.add('none');
                status[1].innerHTML = '';
                for (let k = 0; k < 2; k++) {
                    status[k].classList.add('none');
                }
                timeleft = 5;
                console.log(timeleft);
                clearInterval(fun);
            }
        }
    }
    else {
        //주관식
    }
    const endfetch = async () => {
        const res = await fetch('/exam/resultdata', {
            method: 'POST',
            headers: {
                'Content-Type': 'Application/json'
            },
            body: JSON.stringify(examdata)
        });
        const status = await res.json();
        if (status.status == 'good') {
            console.log(status, 236);
        }
        else {
            alert("We're sorry, but an error occured. We'll find the problem and fix it as soon as we can!");
        }
    };
    endfetch();
    location.href = '/exam/examresult';
};
doingexam();
// 시험 시작
/*
{
    MtoS:[
        {
            answer:2,
            choice:['option1',option2... etc]
            question:'questionquery'

            +++++
            chosen:3
            result:'wrong',

        }
    ]
}
*/
// if(examdata.type === 'objective'){
// }else{
// }


/***/ }),

/***/ "./src/id.ts":
/*!*******************!*\
  !*** ./src/id.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fetchData": () => (/* binding */ fetchData)
/* harmony export */ });
const fetchData = async () => {
    const res = await fetch('/nick');
    const data = await res.json();
    return data.nick;
};
// 클라이언트임!!!!


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ "use strict";
/******/ 
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/exam.ts"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb2NrZXQtdGVzdC1mcm9udC8uL3NyYy9leGFtLnRzIiwid2VicGFjazovL3NvY2tldC10ZXN0LWZyb250Ly4vc3JjL2lkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThCO0FBRTlCLElBQUksSUFBSSxHQUFZLElBQUksQ0FBQztBQUN6QixnREFBZ0Q7QUFFaEQsZ0RBQWdEO0FBR2hELE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFbkQsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO0FBQzVDLENBQUMsQ0FBQyxDQUFDO0FBQ0gsU0FBUztBQUVULE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBVyxFQUFFLEVBQUUsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtJQUN6RCxVQUFVLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFCLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYTtBQUVqQixNQUFNLGFBQWEsR0FBRyxDQUFDLE1BQWtCLEVBQUUsSUFBVyxFQUFFLEVBQUUsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRTtJQUM5RSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7QUFDNUMsTUFBTSxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7SUFDcEIsTUFBTSxJQUFJLEdBQUcsTUFBTSw4Q0FBUyxFQUFFO0lBQzlC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QUcsS0FBSyxJQUFNLEVBQUU7SUFDbEMsTUFBTSxHQUFHLEdBQUcsTUFBTSxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ2hDLE1BQU0sSUFBSSxHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRTtJQUM3QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDckIsQ0FBQztBQUVELGFBQWEiLCJmaWxlIjoiZXhhbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZmV0Y2hEYXRhfSBmcm9tICcuL2lkJ1xyXG5pbXBvcnQge3dvcmRpbmZvLCBjYXJkLHF1ZXJ5LCBleGFtLCBOdW0sIHF1ZXN9IGZyb20gJy4vdHlwZXMnXHJcbmxldCBlbG1zOndvcmRpbmZvID0gbnVsbDtcclxuLy8gaW1wb3J0ICogYXMgc29ja2V0aW8gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XHJcblxyXG4vLyBsZXQgdGVtcG9iaiA9IHt3b3JkLG1lYW4sc3lub255bX0gYXMgd29yZGluZm9cclxuXHJcblxyXG5jb25zdCBzaWdub3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZ25vdXQnKTtcclxuICAgICAgICBcclxuc2lnbm91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgd2luZG93LnBhcmVudC5sb2NhdGlvbi5ocmVmID0gJy9sb2dvdXQnO1xyXG59KTtcclxuLy9zaWdub3V0XHJcblxyXG5jb25zdCBzZXR0aW1lb3V0ID0gKHRpbWU6bnVtYmVyKSA9PiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgIHNldFRpbWVvdXQocmVzLCB0aW1lKTtcclxufSk7IC8vIHRpbWXstIgg6riw64uk66as6riwXHJcblxyXG5jb25zdCB3YWl0dGlsbHByZXNzID0gKHRhcmdldDpIVE1MRWxlbWVudCwgdHlwZTpzdHJpbmcpID0+IG5ldyBQcm9taXNlKChyZXMscmVqKT0+e1xyXG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgcmVzLCB7b25jZTp0cnVlfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgbmljayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uaWNrJylcclxuY29uc3QgaW5pdCA9IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaERhdGEoKVxyXG4gICAgZm9yKGxldCBpID0gMCA7IGkgPCAyOyBpKyspe1xyXG4gICAgICAgIG5pY2suaW5uZXJIVE1MPWRhdGFcclxuICAgIH1cclxuICAgIHJldHVyblxyXG59XHJcbmluaXQoKVxyXG4vL25pY2tuYW1lXHJcblxyXG5jb25zdCBibGVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNibGVzc2luZycpXHJcbmNvbnN0IGZldGNoYmxlc3MgPSBhc3luYyAoKT0+e1xyXG4gICAgY29uc29sZS5sb2coJ2hpJylcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvYmxlc3MnKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICAgIGJsZXNzLmlubmVySFRNTCA9IGRhdGEud29yZFxyXG59ICAgXHJcbmZldGNoYmxlc3MoKTsgXHJcbmNvbnN0IG15cGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNteXBhZ2UnKVxyXG5teXBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlPT57XHJcbiAgICBsb2NhdGlvbi5ocmVmID0gJy8nXHJcbn0pXHJcbi8vdW5kZXJ3b3JkXHJcblxyXG5jb25zdCBzdXBwb3J0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1cHBvcnQnKVxyXG5zdXBwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxlPT57XHJcbiAgICBsb2NhdGlvbi5ocmVmID0gJy9zdXBwb3J0J1xyXG59KVxyXG5cclxuY29uc3Qgc2hhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hhcmUnKVxyXG5zaGFyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZT0+e1xyXG4gICAgbG9jYXRpb24uaHJlZiA9ICcvc2hhcmUnXHJcbn0pXHJcblxyXG4vLyBpZihzb2NrZXRpby5jb25uZWN0KCkuZGlzY29ubmVjdGVkKXtcclxuLy8gICAgIGNvbnN0IGRlbCA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL2V4YW0vdXNlck9mZmxpbmU/JylcclxuLy8gICAgIH1cclxuLy8gICAgIGRlbCgpXHJcbi8vIH1cclxuY29uc3QgdGl0bGUgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpdGxlJyldIGFzIEhUTUxEaXZFbGVtZW50W11cclxuXHJcblxyXG5jb25zdCB3YWl0aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhaXRpbmcnKSBhcyBIVE1MRGl2RWxlbWVudFxyXG5jb25zdCB3aGlsZWV4YW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2hpbGVleGFtJykgYXMgSFRNTERpdkVsZW1lbnRcclxuLy/quLDrs7gg7YuAXHJcblxyXG5jb25zdCByZWFkeSA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVhZHknKV0gYXMgSFRNTERpdkVsZW1lbnRbXVxyXG4vL+yLnOyekSDsi5xcclxuXHJcbmNvbnN0IHF1ZXN0aW9uZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uJykgYXMgSFRNTERpdkVsZW1lbnRcclxuY29uc3QgZ2l2ZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2l2ZW4nKSBhcyBIVE1MRGl2RWxlbWVudFxyXG4vL+usuOygnFxyXG5cclxuY29uc3QgY2hvaWNlbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0JykgYXMgSFRNTE9MaXN0RWxlbWVudFxyXG4vLyDqsJ3qtIDsi51cclxuXHJcbmNvbnN0IGFuc3dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbnN3ZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50XHJcbi8v7KO86rSA7IudXHJcblxyXG5jb25zdCBzdGF0dXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0YXR1cycpXSBhcyBIVE1MRGl2RWxlbWVudFtdXHJcbi8vIOyglSAvIOyYpOuLtVxyXG5cclxuY29uc3QgbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0JykgYXMgSFRNTERpdkVsZW1lbnRcclxuLy/ri6TsnYwg66y47KCc66GcXHJcblxyXG5jb25zdCB0aW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWVsZWZ0JykgYXMgSFRNTERpdkVsZW1lbnRcclxuLy/rgqjsnYAg7Iuc6rCEXHJcblxyXG5sZXQgcGFyYW1zID0gKG5ldyBVUkwoYCR7bG9jYXRpb259YCkpLnNlYXJjaFBhcmFtc1xyXG5sZXQgZGF0YSA9IHtcclxuICAgIHR5cGU6cGFyYW1zLmdldCgndHlwZScpLFxyXG4gICAgdGl0bGU6cGFyYW1zLmdldCgndGl0bGUnKS5yZXBsYWNlKC9cXCFcXEBcXCFcXEBcXCRcXCgvZywnICcpXHJcbn0gXHJcbndoaWxlZXhhbS5jbGFzc0xpc3QuYWRkKCdub25lJylcclxuY29uc3Qgc2V0dGl0bGUgPSAoKT0+e1xyXG4gICAgdGl0bGVbMF0uaW5uZXJIVE1MID0gYFJhbmdlIDogJHtkYXRhLnRpdGxlfWBcclxuICAgIHRpdGxlWzFdLmlubmVySFRNTCA9IGBUeXBlIDogJHtkYXRhLnR5cGV9YFxyXG59XHJcbnNldHRpdGxlKClcclxuLy/soJzrqqkg7ZGc7LacXHJcblxyXG5cclxuXHJcbmNvbnN0IGFycjooa2V5b2YgTnVtKVtdID0gWydXdG9NJywnV3RvUycsJ010b1cnLCdNdG9TJywnU3RvVycsJ1N0b00nXVxyXG5cclxubGV0IGV4YW1kYXRhID0gbnVsbCBhcyBleGFtO1xyXG5jb25zdCBkb2luZ2V4YW0gPSBhc3luYygpPT57XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2V4YW0vZ2V0RXhhbURhdGE/dHlwZT0ke3BhcmFtcy5nZXQoJ3R5cGUnKX0mbWFkZWJ5PSR7cGFyYW1zLmdldCgnbWFkZWJ5Jyl9JnRpdGxlPSR7cGFyYW1zLmdldCgndGl0bGUnKX0mc2hhcmU9JHtwYXJhbXMuZ2V0KCdzaGFyZScpfSZleGFtaW5lZT0ke3BhcmFtcy5nZXQoJ2V4YW1pbmVlJyl9YClcclxuICAgIGNvbnN0IHJlc3VsdCA9YXdhaXQgcmVzLmpzb24oKVxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgZXhhbWRhdGEgPSByZXN1bHQuZXhhbWRhdGE7XHJcbiAgICBjb25zb2xlLmxvZyhleGFtZGF0YSkvLyDqsrDqs7zrpbwg7LKo7IKtIO2YleyLneycvOuhnCDsl6zquLDri6Qg64Sj6riwXHJcblxyXG4gICAgd2FpdGluZy5jbGFzc0xpc3QucmVtb3ZlKCdub25lJylcclxuICAgIHJlYWR5WzBdLmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKVxyXG4gICAgYXdhaXQgc2V0dGltZW91dCgzMDAwKTtcclxuICAgIHJlYWR5WzBdLmNsYXNzTGlzdC5hZGQoJ25vbmUnKVxyXG4gICAgcmVhZHlbMV0uY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpXHJcbiAgICBhd2FpdCBzZXR0aW1lb3V0KDUwMCkgXHJcbiAgICByZWFkeVsxXS5jbGFzc0xpc3QuYWRkKCdub25lJylcclxuICAgIHdhaXRpbmcuY2xhc3NMaXN0LmFkZCgnbm9uZScpXHJcbiAgICBcclxuICAgIHdoaWxlZXhhbS5jbGFzc0xpc3QucmVtb3ZlKCdub25lJylcclxuXHJcbiAgICBsZXQgcXVlc3Rpb25saXN0ID0gZXhhbWRhdGEucXVlc3Rpb25cclxuICAgIGxldCBudSA9IDE7XHJcbiAgICB0eXBlIFJlcGxhY2UgPSB7VzpzdHJpbmc7IE06c3RyaW5nOyBTOnN0cmluZ307XHJcbiAgICBsZXQgcmVwbGFjZTpSZXBsYWNlID0geyAvLyDsuZjtmZgg66as7Iqk7Yq4XHJcbiAgICAgICAgVzond29yZCcsXHJcbiAgICAgICAgTTonbWVhbicsXHJcbiAgICAgICAgUzonc3lub255bSdcclxuICAgIH1cclxuICAgIGlmKGV4YW1kYXRhLnR5cGUgPT09ICdvYmplY3RpdmUnKXtcclxuICAgICAgICBjaG9pY2VsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKVxyXG4gICAgICAgIGZvcihsZXQgaSBvZiBhcnIpeyAvLyDsnKDtmJUgNuqwnFxyXG4gICAgICAgICAgICBjb25zdCBrZXkxID0gaVswXSBhcyBrZXlvZiBSZXBsYWNlXHJcbiAgICAgICAgICAgIGNvbnN0IGtleTIgPSBpWzNdIGFzIGtleW9mIFJlcGxhY2VcclxuICAgICAgICAgICAgbGV0IGZyb20gPSByZXBsYWNlW2tleTFdIGFzICd3b3JkJyB8ICdtZWFuJyB8ICdzeW5vbnltJ1xyXG4gICAgICAgICAgICBsZXQgdG8gPSByZXBsYWNlW2tleTJdIGFzICd3b3JkJyB8ICdtZWFuJyB8ICdzeW5vbnltJ1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZXhhbWRhdGEucXVlc3Rpb25baV0ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgbGV0IHRyaWdnZXIgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VpZmonKVxyXG4gICAgICAgICAgICAgICAgbGV0IHF1ZXN0aW9uID0gcXVlc3Rpb25saXN0W2ldW2pdIGFzIHF1ZXMvLyDsp4DquIgg64K07JW8IO2VoCDrrLjsoJwg6rCA7KC47Jik6riwXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhxdWVzdGlvbilcclxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uZGl2LmlubmVySFRNTCA9IGBRJHtudX0uIFdoaWNoIGNob2ljZSBpcyB0aGUgYmVzdCBmaXQ/YFxyXG4gICAgICAgICAgICAgICAgbnUrK1xyXG4gICAgICAgICAgICAgICAgZ2l2ZW4uaW5uZXJIVE1MID0gYEdpdmVuIHdvcmQgOiAke3F1ZXN0aW9uLnF1ZXN0aW9ufWBcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgayA9MDsgazwgNTsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpXHJcbiAgICAgICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gcXVlc3Rpb24uY2hvaWNlW2tdXHJcbiAgICAgICAgICAgICAgICAgICAgY2hvaWNlbGlzdC5hcHBlbmRDaGlsZChsaSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNob2ljZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdvbCA+IGxpJylcclxuICAgICAgICAgICAgICAgIHRpbWUuY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpXHJcbiAgICAgICAgICAgICAgICB0aW1lLmlubmVySFRNTCA9ICdUaW1lIExlZnQgOiA1IHNlYydcclxuICAgICAgICAgICAgICAgIGxldCB0aW1lbGVmdCA9IDVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1biA9IHNldEludGVydmFsKCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvdW50aW5nJylcclxuICAgICAgICAgICAgICAgICAgICB0aW1lbGVmdC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gYFRpbWUgTGVmdCA6ICR7dGltZWxlZnR9IHNlY2BcclxuICAgICAgICAgICAgICAgICAgICBpZih0aW1lbGVmdD09PTApIGNsZWFySW50ZXJ2YWwoZnVuKVxyXG4gICAgICAgICAgICAgICAgfSwxMDAwKVxyXG4gICAgICAgICAgICAgICAgbGV0IGFuc3dlciA9IHF1ZXN0aW9uLmFuc3dlclxyXG4gICAgICAgICAgICAgICAgY2hvaWNlbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MTElFbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFyZ2V0LmlubmVySFRNTClcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQuaW5uZXJIVE1MID09PSBxdWVzdGlvbi5jaG9pY2VbYW5zd2VyXSl7IC8vIOunnuyVmOydhCDrlYxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbWRhdGEucXVlc3Rpb25baV1bal0ucmVzdWx0ID0gJ2NvcnJlY3QnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1kYXRhLnF1ZXN0aW9uW2ldW2pdLmNob3NlbiA9IHRhcmdldC5pbm5lckhUTUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn66ee7J2MJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChmdW4pXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7IC8vIO2LgOuguOydhCDrlYxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGltZWxlZnQ9PT0wKXsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtZGF0YS5xdWVzdGlvbltpXVtqXS5yZXN1bHQgPSAnd3JvbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1kYXRhLnF1ZXN0aW9uW2ldW2pdLmNob3NlbiA9IHRhcmdldC5pbm5lckhUTUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzWzFdLmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNbMV0uaW5uZXJIVE1MID0gYFdyb25nIENob2ljZSA6LyA8YnI+IEFuc3dlciA6ICR7ZXhhbWRhdGEucXVlc3Rpb25baV1bal0uY2hvaWNlW2Fuc3dlcl19YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn7YuA66a8JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChmdW4pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciA9IHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbWVvdXQoNTAwMCkgLy/si5zqsITsoJztlZwgNey0iC5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyaWdnZXIpXHJcbiAgICAgICAgICAgICAgICBpZighdHJpZ2dlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbWRhdGEucXVlc3Rpb25baV1bal0ucmVzdWx0ID0gJ3dyb25nJ1xyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1kYXRhLnF1ZXN0aW9uW2ldW2pdLmNob3NlbiA9IG51bGwgLy8g7ISg7YOdIOyViO2VqCAo7Iuc6rCEIOy0iOqzvClcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNbMV0uY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzWzFdLmlubmVySFRNTCA9IGBZb3UgcmFuIGFsbCBvZiB0aW1lISA6fCA8YnI+IEFuc3dlciA6ICR7ZXhhbWRhdGEucXVlc3Rpb25baV1bal0uY2hvaWNlW2Fuc3dlcl19YFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpXHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2FpdHRpbGxwcmVzcyhuZXh0LCdjbGljaycpXHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCBjaG9pY2VsaXN0Lmhhc0NoaWxkTm9kZXMoKSApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgIGNob2ljZWxpc3QucmVtb3ZlQ2hpbGQoIGNob2ljZWxpc3QuZmlyc3RDaGlsZCApOyAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LmFkZCgnbm9uZScpXHJcbiAgICAgICAgICAgICAgICBzdGF0dXNbMV0uaW5uZXJIVE1MID0gJydcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgayA9MCA7IGsgPCAyIDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNba10uY2xhc3NMaXN0LmFkZCgnbm9uZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aW1lbGVmdCA9IDVcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRpbWVsZWZ0KVxyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChmdW4pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgLy/so7zqtIDsi51cclxuICAgIH1cclxuICAgIGNvbnN0IGVuZGZldGNoID0gYXN5bmMoKT0+e1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvZXhhbS9yZXN1bHRkYXRhJyx7XHJcbiAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6e1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J0FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6SlNPTi5zdHJpbmdpZnkoZXhhbWRhdGEpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgICAgICAgaWYoc3RhdHVzLnN0YXR1cyA9PSAnZ29vZCcpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0dXMsMjM2KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBhbGVydChcIldlJ3JlIHNvcnJ5LCBidXQgYW4gZXJyb3Igb2NjdXJlZC4gV2UnbGwgZmluZCB0aGUgcHJvYmxlbSBhbmQgZml4IGl0IGFzIHNvb24gYXMgd2UgY2FuIVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVuZGZldGNoKClcclxuICAgIGxvY2F0aW9uLmhyZWYgPSAnL2V4YW0vZXhhbXJlc3VsdCcgXHJcbn1cclxuZG9pbmdleGFtKClcclxuXHJcblxyXG4vLyDsi5ztl5gg7Iuc7J6RXHJcblxyXG4vKlxyXG57XHJcbiAgICBNdG9TOltcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuc3dlcjoyLFxyXG4gICAgICAgICAgICBjaG9pY2U6WydvcHRpb24xJyxvcHRpb24yLi4uIGV0Y11cclxuICAgICAgICAgICAgcXVlc3Rpb246J3F1ZXN0aW9ucXVlcnknXHJcblxyXG4gICAgICAgICAgICArKysrK1xyXG4gICAgICAgICAgICBjaG9zZW46M1xyXG4gICAgICAgICAgICByZXN1bHQ6J3dyb25nJyxcclxuXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59XHJcbiovXHJcblxyXG4vLyBpZihleGFtZGF0YS50eXBlID09PSAnb2JqZWN0aXZlJyl7XHJcblxyXG4gICAgXHJcbi8vIH1lbHNle1xyXG5cclxuLy8gfVxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jIDxUPigpPT57XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL25pY2snKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICAgIHJldHVybiBkYXRhLm5pY2s7XHJcbn1cclxuXHJcbi8vIO2BtOudvOydtOyWuO2KuOyehCEhISFcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==